# 1.基本内容
1.  转账的例子引出事务
2.  事务的


# 2.事务
1.  简单说：事务就是保证一组数据库操作，要么全做要么不做
2.  四个隔离级别以及他们引起和解决的问题
    1.  读未提交
    2.  读已提交
    3.  可重复度——RR（幻读）
    4.  串行化
3.  如何设置隔离界别：
    1.  set transaction-isolation 'read-committed'

4.  rr的场景：
    1.  数据校对(账户余额表和账单明细表的每月校对)
    2.  备份
5.  事务隔离的实现之可重复度
    1.  mvcc
    2.  全局的事务id
    3.  会馆日志undo-log
    4.  总结：
        1.  每条数据都是有一个逻辑变化而来的；每一个变化都会打上造成变化的事务的id
        2.  当前值+undo日志，并且比对日志的事务id和当前事务的id，如果小于或等于，就是可见的。
            否则不可见。

6.  长事务的危害-常更
    1.  导致回滚日志一直不能删除
    2.  占用锁资源

7.  事务的启动方式
    1.  显示启动：begin 或者 start transaction
    2.  set autocommit=0 关闭自动提交：每一个句子都会开启事务，需要手动提交或回滚
    3.  注意：语法上是这样开启了，但是事务内的加锁可只是到了第一条语句的时候，才开始。
    4.  问题：在spring的@Transactional中，事务是在哪里开始，在哪里提交呢？在哪里的Exception会导致回滚呢？

